<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <a href="../index.html" th:href="@{/}"><h1 class = "title logo"><span>R</span><span>E</span><span>B</span><span>O</span><span>O</span><span>K</span></h1></a>
    <div class = "row">
    <main class="member-info-main mx-auto">
        <form method="post" action="/user/edit" >
        <div class = "member-info-title">
            <h1 class="member-info-text">회원정보</h1>
            <button class="btn edit" type="submit" >완료</button>
        </div>
        <div class="row">

            <div class="col-md-10 member-detail">
                <div>이름</div>
                <input type="text" class="form-control rPw" value="홍길동" name="userName" th:value="${user.userName}" required>
            </div>

            <div class="col-md-10 member-detail">
                <div>전화번호</div>
                <input type="text" class="form-control rPw" value="010-1234-5678" name="phoneNumber" th:value="${user.phoneNumber}" required>
            </div>

            <div class="col-md-10 member-detail">
                <div>아이디</div>
                <input type="text" class="form-control rPw" value="ID" name="userID" th:value="${user.userID}" required>
            </div>

            <div class="col-md-10 member-detail">
                <div>비밀번호</div>
                <input type="password" class="form-control rPw" value="******" th:value="${user.userPassword}" name="password" required>
            </div>

            <div class="col-md-3 register-input margin-left">
                <label class="form-label">학교</label>
                <select class="form-select" id="university-select" onchange="changeDepartment()" required>
                    <option selected disabled value="">Choose...</option>
                    <option th:each="schoolname : ${schoolMajorMap.keySet()}" th:text="${schoolname}" >한국기술교육대학교</option>
                </select>
            </div>
            <div class="col-md-3 register-input" style="margin-left:4rem;">
                <label class="form-label">학과</label>
                <select class="form-select" id="department-select" required>
                    <option selected disabled value="">Choose...</option>
                </select>
            </div>

        </div>

        </form>


    </main>
    </div>
    <script th:inline="javascript">
        /*<![CDATA[*/
        const schoolMajorMap = /*[[${schoolMajorMap}]]*/;

        function changeDepartment() {

            const university_option = document.getElementById("university-select");

            let selectedUniversity = university_option.options[university_option.selectedIndex].text

            let departmentList = schoolMajorMap[selectedUniversity]
            let option="<option selected disabled value=\"\">Choose...</option>";
            for (let i = 0; i < departmentList.length; i++) {
                option += "<option value="+departmentList[i]+">"+departmentList[i]+"</option>";
            }

            document.getElementById("department-select").innerHTML = option;
        }
        /*]]>*/
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="../js/member.js"></script>
</body>
</html>
